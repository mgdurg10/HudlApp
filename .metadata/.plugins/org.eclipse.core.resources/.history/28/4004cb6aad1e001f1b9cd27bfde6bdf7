package hudl;

import java.time.Duration;

import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.picocontainer.DefaultPicoContainer;
import org.picocontainer.MutablePicoContainer;
import org.picocontainer.behaviors.Caching;

import hudlutilities.WebDriverManager;
import io.cucumber.java.After;
import io.cucumber.java.Before;
import io.cucumber.java.en.Given;
import io.cucumber.java.en.Then;

public class CucumberTest {
    private MutablePicoContainer picoContainer;

    @Before
    public void setUp() {
        picoContainer = new DefaultPicoContainer(new Caching());
        picoContainer.addComponent(WebDriverManager.class);
    }

    @After
    public void tearDown() {
        WebDriverManager webDriverManager = picoContainer.getComponent(WebDriverManager.class);
        webDriverManager.quitDriver();
    }

    @Given("a sample step")
    public void aSampleStep() throws InterruptedException {
        WebDriverManager webDriverManager = picoContainer.getComponent(WebDriverManager.class);
        WebDriver driver = webDriverManager.getDriver();
        
      driver.get("https://fan.hudl.com/");
  	driver.manage().window().maximize();
	Thread.sleep(2000);
	driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(60));

    }

    @Then("another sample step")
    public void anotherSampleStep() throws InterruptedException {
        WebDriverManager webDriverManager = picoContainer.getComponent(WebDriverManager.class);
        WebDriver driver = webDriverManager.getDriver();
    	driver.findElement(By.xpath("//button[text()='Log In']")).click();
		Thread.sleep(2000);
		driver.findElement(By.xpath("//button[@id='btn-google-login']")).click();
		Thread.sleep(2000);
		driver.findElement(By.xpath("//input[@type='email']")).sendKeys("durgmonika");
		Thread.sleep(2000);
		driver.findElement(By.xpath("//span[text()='Next']")).click();
		Thread.sleep(2000);
		driver.findElement(By.xpath("//input[@type='password']")).sendKeys("CG@monika");
		Thread.sleep(2000);
		driver.findElement(By.xpath("//span[text()='Next']")).click();
		Thread.sleep(5000);
    }
}